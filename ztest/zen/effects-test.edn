{ns zen.effects-test
 import #{zen.test}

 only-one
 {:zen/tags #{zen/schema-fx zen/schema}
  :type     zen/vector
  :every    {:type zen/keyword}}

 subj
 {:zen/tags #{zen/schema}
  :type     zen/map
  :keys     {:name  {:type zen/string}
             :email {:type zen/string}}
  only-one      [:name :email]}

 fx-tests
 {:zen/tags #{zen.test/case}
  :title ""
  :steps
  [{:desc "FX emit"
    :do {:type zen.test/validate
         :schema subj
         :data {:name "somename" :email "somemail@mail.com"}}
    :match {:errors zen.test/nil?
            :effects [{:name   zen.effects-test/only-one
                       :path   [zen.effects-test/only-one]
                       :data   {:name "somename" :email "somemail@mail.com"}
                       :params [:name :email]}
                      zen.test/nil?]}}]}

 }
